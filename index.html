<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>20/10 â€” DÃ nh táº·ng Em</title>
<meta name="description" content="Má»™t trang web nhá» dÃ nh táº·ng em nhÃ¢n ngÃ y 20/10." />
<meta name="theme-color" content="#ff7aa2" />
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E%F0%9F%92%96%3C/text%3E%3C/svg%3E">

<style>
:root{
  --bg:#0a0a13;
  --txt:#ff7aa2;          /* chá»¯ Ä‘áº­m Ä‘á»ƒ ná»•i trÃªn video */
  --muted:#ff7aa2;
  --primary:#ff7aa2;
  --accent:#ffd96a;
  --card:#ffffffcc;
  --shadow: 0 10px 25px rgba(255,122,162,.25);
  --radius:18px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color:var(--txt);
  background:#fff8fb; line-height:1.6; overflow-x:hidden;
  padding-left: env(safe-area-inset-left); padding-right: env(safe-area-inset-right);
}
a{color:inherit}
.container{width:min(1100px, 92vw); margin:0 auto;}

/* ===== INTRO (Ä‘Ãªm: báº§u trá»i sao + trÃ¡i tim Ä‘áº­p) ===== */
#intro{
  position:fixed; inset:0; z-index:1000;
  background: radial-gradient(1200px 700px at 50% -20%, #1a1730 0%, transparent 60%), #0a0a13;
  display:flex; align-items:center; justify-content:center; flex-direction:column; gap:18px; color:#eae4ff;
}
#introCanvas{ position:absolute; inset:0; width:100%; height:100%; }
.intro-content{ position:relative; text-align:center; z-index:2; padding:16px 20px; }
.intro-title{ font-size: clamp(22px, 5vw, 40px); margin:0 0 6px; letter-spacing:.3px }
.intro-sub{ margin:0 0 10px; color:#cfc6ff }
.pill{
  display:inline-flex; align-items:center; gap:.5rem; padding:10px 16px; border-radius:999px;
  background:var(--primary); color:#fff; border:none; box-shadow:0 10px 25px rgba(255,122,162,.35); cursor:pointer; font-weight:700;
  min-height:44px;
}
.pill.ghost{ background:transparent; color:#ffdfe9; border:1px solid #ffb9cf }
.bounce{ animation: bounce 1.6s ease-in-out infinite }
@keyframes bounce{ 0%,100%{ transform:translateY(0)} 50%{ transform:translateY(-6px)} }

/* intro countdown */
.intro-countdown{
  display:inline-flex; gap:10px; align-items:stretch; margin:12px 0 2px;
  padding:10px; border-radius:14px;
  background:linear-gradient(180deg, #171629cc, #131224cc); border:1px solid #3b355a;
  box-shadow:0 10px 30px rgba(0,0,0,.35), inset 0 0 20px #1c1a33;
}
.icell{ min-width:78px; padding:8px 10px; border-radius:10px; backdrop-filter: blur(6px);
  background:linear-gradient(180deg,#23213d,#1a1931);
  border:1px solid #4b4672; color:#f3eaff; text-align:center;
}
.icell .num{font-weight:800; font-size:22px}
.icell .lbl{font-size:12px; color:#bcb1ff; letter-spacing:.4px}

/* ===== VIDEO WALL BACKGROUND (6 Ã´ â€” Ä‘áº¹p & gá»n) ===== */
#videoBG{
  position:fixed; inset:0; z-index:0; pointer-events:none;
  opacity:0; transition:opacity .8s ease;
  display:grid;
  grid-template-areas:
    "a b c"
    "d e f";
  grid-template-columns: 1fr 1fr 1fr;
  grid-template-rows: 50vh 50vh;
  gap:10px;
  padding:10px;
}
@media (max-width: 900px){
  #videoBG{
    grid-template-areas:
      "a b"
      "c d"
      "e f";
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 34vh 34vh 34vh;
    gap:8px;
    padding:8px;
  }
}
#videoBG::after{
  content:"";
  position:absolute; inset:0; z-index:2;
  background:
    radial-gradient(1200px 800px at 70% 15%, rgba(10,8,20,.12) 0%, rgba(10,8,20,0) 60%),
    linear-gradient(180deg, rgba(10,8,20,.32), rgba(10,8,20,.44));
  backdrop-filter: blur(1.4px);
}
.vcell{
  position:relative; overflow:hidden; border-radius:16px; z-index:1;
  outline:1px solid rgba(255,255,255,.06);
  box-shadow: 0 1px 0 rgba(255,255,255,.2) inset, 0 10px 22px rgba(0,0,0,.15);
}
.vcell[data-area="a"]{ grid-area:a }
.vcell[data-area="b"]{ grid-area:b }
.vcell[data-area="c"]{ grid-area:c }
.vcell[data-area="d"]{ grid-area:d }
.vcell[data-area="e"]{ grid-area:e }
.vcell[data-area="f"]{ grid-area:f }
.vcell video{
  position:absolute; inset:0; width:100%; height:100%; object-fit:cover;
  filter:saturate(1.07) contrast(1.05) brightness(.9);
  opacity:0; animation: fadeIn .9s ease forwards;
  transform: scale(1.04);
}
.vcell.a video{ object-position: 50% 40%; animation-name: fadeIn, panTR; animation-duration: .9s, 28s; }
.vcell.b video{ object-position: 30% 50%; animation-name: fadeIn, panBL; animation-duration: .9s, 30s; }
.vcell.c video{ object-position: 70% 50%; animation-name: fadeIn, panTB; animation-duration: .9s, 26s; }
.vcell.d video{ object-position: 50% 60%; animation-name: fadeIn, panLR; animation-duration: .9s, 32s; }
.vcell.e video{ object-position: 40% 50%; animation-name: fadeIn, panBR; animation-duration: .9s, 29s; }
.vcell.f video{ object-position: 60% 45%; animation-name: fadeIn, panTL; animation-duration: .9s, 31s; }
.vcell video{ animation-timing-function: ease, linear; }
@keyframes fadeIn{ from{opacity:0} to{opacity:1} }
@keyframes panTR{ from{transform:scale(1.04) translate(-1.5%, 1.5%)} to{transform:scale(1.08) translate(1.5%, -1.5%)} }
@keyframes panBL{ from{transform:scale(1.04) translate(1.2%, -1.2%)} to{transform:scale(1.08) translate(-1.2%, 1.2%)} }
@keyframes panTB{ from{transform:scale(1.04) translate(0, 1.8%)} to{transform:scale(1.08) translate(0, -1.8%)} }
@keyframes panLR{ from{transform:scale(1.04) translate(-2%, 0)} to{transform:scale(1.08) translate(2%, 0)} }
@keyframes panBR{ from{transform:scale(1.04) translate(1.2%, 1.2%)} to{transform:scale(1.08) translate(-1.2%, -1.2%)} }
@keyframes panTL{ from{transform:scale(1.04) translate(-1.2%, -1.2%)} to{transform:scale(1.08) translate(1.2%, 1.2%)} }

/* ===== CONTENT ===== */
main{ position:relative; z-index:2; }
.hero{ padding:56px 0 40px; text-align:center; }
.hero h1{ font-size: clamp(22px, 6.2vw, 32px); line-height:1.12; margin:0 0 12px; letter-spacing:.2px; color:#ff7aa2; text-shadow: 0 1px 0 rgba(255,255,255,.5); }
.hero .subtitle{color:var(--muted); margin-bottom:22px}
.hero-card{ margin:22px auto 0; padding:20px; border-radius: 14px;
  background: linear-gradient(180deg, #fff, #fff7fa); box-shadow: 0 8px 18px rgba(0,0,0,.08); display:inline-block; }

section{padding:50px 0}
.sec-title{ font-size: clamp(18px, 5.2vw, 26px); margin:0 0 18px; color:#ff7aa2 }
.lead{color:var(--muted); margin-top:-6px; margin-bottom:18px}
.card{ background:#ffffffcc; border:1px solid #ffe0ec; border-radius:14px; padding:16px 18px; box-shadow:0 8px 18px rgba(0,0,0,.08) }

/* Traits (tilt) */
.traits{ display:grid; gap:16px; grid-template-columns: repeat(auto-fit, minmax(210px,1fr)); }
.trait{
  position:relative; background:#fff; border:1px solid #ffd9e7; border-radius:16px; padding:16px;
  box-shadow: var(--shadow); transform: perspective(700px) rotateX(0) rotateY(0); transition: transform .12s ease, box-shadow .2s ease;
  will-change: transform; transform-style: preserve-3d;
}
.trait:hover{ box-shadow:0 16px 50px rgba(255,122,162,.35) }
.trait h3{margin:0 0 6px; font-size:18px}
.trait p{margin:0; color:var(--muted); font-size:14px}
.trait::after{
  content:"";
  position:absolute; inset:0; border-radius:16px; pointer-events:none;
  background: radial-gradient(600px 300px at var(--lx,50%) var(--ly,50%),
              rgba(255,255,255,.35), rgba(255,255,255,0) 60%);
  opacity:.0; transition: opacity .2s ease;
}
.trait:hover::after{ opacity:.55; }

/* Timeline */
.timeline{position:relative}
.timeline::before{ content:""; position:absolute; left:calc(50% - 1px); top:0; bottom:0; width:2px; background:linear-gradient(180deg, #ffc2d6, #ffd96a); }
.tl-item{ position:relative; width:calc(50% - 22px); margin:18px 0; padding:16px 18px; background:#fff; border:1px solid #ffd3e4; border-radius:14px; box-shadow:var(--shadow); }
.tl-item:nth-child(odd){margin-left:auto}
.tl-item::after{ content:""; position:absolute; top:18px; width:14px; height:14px; border-radius:50%; background:#ff7aa2; box-shadow:0 0 0 6px #ffe7f0aa; left: calc(100% + 14px); }
.tl-item:nth-child(odd)::after{left:auto; right: calc(100% + 14px)}
.tag{display:inline-block; padding:2px 10px; border-radius:999px; background:#fff0f5; color:#b13e68; font-size:12px; border:1px solid #ffd2e3; margin-bottom:8px}

/* Letter */
.letter{ background: linear-gradient(180deg, #fffdfa, #fff0f5); border:1px dashed #ffc8de; padding:22px; border-radius:16px; }
.typewriter{min-height:96px; font-size:18px}
.letter .actions{display:flex; gap:12px; margin-top:12px}

/* Carousel */
.carousel{ position:relative; overflow:hidden; border-radius:16px; border:1px solid #ffdbe7; box-shadow:var(--shadow); }
.track{ display:flex; width:max-content; animation: slide 26s linear infinite; }
.track img{ width:72vw; max-width:520px; height:320px; object-fit:cover; border-right:1px solid #ffe5ef }
@keyframes slide{ 0%{ transform: translateX(0) } 100%{ transform: translateX(-50%) } }
.carousel .hint{ position:absolute; right:10px; bottom:8px; font-size:12px; color:#b13e68; background:#fff; border:1px solid #ffd3e4; padding:4px 8px; border-radius:999px }

/* Quiz */
.quiz{ display:grid; gap:12px; }
.opt{ background:#fff; border:1px solid #ffd9e7; border-radius:12px; padding:12px; cursor:pointer; transition: transform .06s ease, box-shadow .2s ease, border-color .2s; }
.opt:hover{ box-shadow:0 10px 30px rgba(255,122,162,.25); transform: translateY(-2px); }
.opt.correct{ border-color:#8dd38a; background: #f4fff3; }
.opt.wrong{ border-color:#ffb0c6; background:#fff4f7; }
.quiz .result{ color:#b13e68; font-weight:700; }

/* Chips/Toast */
.chips{ display:flex; gap:8px; flex-wrap:wrap }
.chip{ background:#fff; border:1px solid #ffd3e4; border-radius:999px; padding:8px 12px; cursor:pointer }
.toast{
  position:fixed; left:50%; bottom:22px; transform:translateX(-50%) translateY(20px);
  background:#222; color:#fff; padding:10px 14px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.25);
  opacity:0; transition: all .3s ease; z-index:50;
}
.toast.show{ opacity:1; transform:translateX(-50%) translateY(0) }

/* Gallery */
.gallery{columns:1; column-gap:12px}
@media (min-width:700px){.gallery{columns:2}}
@media (min-width:1000px){.gallery{columns:3}}
.gallery img{ width:100%; border-radius:12px; margin:0 0 12px; display:block; border:1px solid #ffe1ed; box-shadow:var(--shadow); transition:transform .25s ease, box-shadow .25s ease; }
.gallery img:hover{transform:translateY(-4px) scale(1.01); box-shadow:0 16px 40px rgba(255,122,162,.35)}

/* Modal */
.modal-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.4); display:none; align-items:center; justify-content:center; z-index:40; }
.modal{background:#fff; border-radius:18px; max-width:520px; width:92vw; padding:22px; box-shadow:0 30px 80px rgba(0,0,0,.25)}
.modal h3{margin-top:0}
.qr{ background:repeating-conic-gradient(from 0deg, #eee 0 10deg, #fff 10deg 20deg); width:220px; height:220px; border-radius:12px; display:flex; align-items:center; justify-content:center; margin:10px auto; border:1px solid #f1f1f1; color:#777; font-weight:700; }
.modal .row{display:flex; gap:10px; flex-wrap:wrap; justify-content:center}
.modal .row .pill{background:#222; color:#fff;}

/* Hearts Canvas */
#hearts{
  position:fixed; inset:0; z-index:5; pointer-events:none;
}

/* Accessibility */
@media (prefers-reduced-motion: reduce){
  .track{ animation: none }
  .trait{ transform:none !important }
  .trait::after{ display:none }
}
</style>
</head>
<body>

<!-- INTRO: Night sky + beating star heart + COUNTDOWN -->
<div id="intro" role="dialog" aria-modal="true" aria-label="MÃ n má»Ÿ Ä‘áº§u Ä‘Ãªm sao">
  <canvas id="introCanvas"></canvas>
  <div class="intro-content">
    <h1 class="intro-title">Cho Em â€” 20/10 dÆ°á»›i báº§u trá»i sao âœ¨</h1>
    <div class="intro-countdown" aria-label="Äáº¿m ngÆ°á»£c tá»›i 20/10">
      <div class="icell"><div class="num" id="dd">--</div><div class="lbl">NgÃ y</div></div>
      <div class="icell"><div class="num" id="hh">--</div><div class="lbl">Giá»</div></div>
      <div class="icell"><div class="num" id="mm">--</div><div class="lbl">PhÃºt</div></div>
      <div class="icell"><div class="num" id="ss">--</div><div class="lbl">GiÃ¢y</div></div>
    </div>
    <p class="intro-sub">Nháº¥n â€œBáº¯t Ä‘áº§uâ€ Ä‘á»ƒ má»Ÿ nháº¡c vÃ  bÆ°á»›c vÃ o vÃ¹ng kÃ½ á»©c cá»§a hai ta.</p>
    <button id="btnEnter" class="pill bounce">â–¶ï¸ Báº¯t Ä‘áº§u</button>
    <div><button id="btnMuteHint" class="pill ghost">Náº¿u khÃ´ng nghe nháº¡c, hÃ£y báº­t Ã¢m thanh ğŸ”Š</button></div>
  </div>
</div>

<!-- Video mosaic background -->
<div id="videoBG" aria-hidden="true"></div>

<!-- Hearts -->
<canvas id="hearts" aria-hidden="true"></canvas>

<main aria-live="polite">
  <section class="hero">
    <div class="container">
      <h1>Gá»­i Em â€” ngÆ°á»i con gÃ¡i Ä‘áº·c biá»‡t nháº¥t ngÃ y <span style="color:#ff7aa2">20/10</span> ğŸ’</h1>
      <p class="subtitle">CÃ¡m Æ¡n Em vÃ¬ Ä‘Ã£ Ä‘áº¿n vÃ  lÃ m cuá»™c Ä‘á»i anh rá»±c rá»¡ nhÆ° náº¯ng sá»›m. HÃ´m nay, xin dÃ nh trá»n trang nÃ y cho Em.</p>
      <div class="hero-card">
        <div class="center">ChÃºc Em má»™t ngÃ y 20/10 ráº¡ng rá»¡ â€” nhÆ° chÃ­nh Em. âœ¨</div>
      </div>
    </div>
  </section>

  <!-- VÃ¬ sao Em tuyá»‡t? -->
  <section>
    <div class="container">
      <h2 class="sec-title">VÃ¬ sao Em tuyá»‡t? ğŸ’–</h2>
      <p class="lead">6 Ä‘iá»u khiáº¿n anh thÃ­ch em tá»« cÃ¡i nhÃ¬n Ä‘áº§u.</p>
      <div class="traits">
        <div class="trait"><h3>ğŸŒ Ná»¥ cÆ°á»i</h3><p>LÃ m anh vui má»—i khi tháº¥y em.</p></div>
        <div class="trait"><h3>ğŸ§  ThÃ´ng minh</h3><p>NÃ³i Ã­t nhÆ°ng trÃºng trá»ng tÃ¢m.</p></div>
        <div class="trait"><h3>ğŸ’ª KiÃªn Ä‘á»‹nh</h3><p>Äi Ä‘áº¿n cÃ¹ng Ä‘iá»u Em chá»n.</p></div>
        <div class="trait"><h3>ğŸ¨ Gu riÃªng</h3><p>Äá»“ Em chá»n â€” luÃ´n xá»‹n trá»« Ä‘á»“ Äƒn.</p></div>
        <div class="trait"><h3>ğŸ¤ Thá»ƒ thao</h3><p>ThÃ­ch thá»ƒ thao.</p></div>
        <div class="trait"><h3>ğŸŒ¿ Äiá»m tÄ©nh</h3><p>Cho anh cáº£m giÃ¡c an yÃªn.</p></div>
      </div>
    </div>
  </section>

  <!-- TIMELINE -->
  <section id="story">
    <div class="container">
      <h2 class="sec-title">Chuyá»‡n Ä‘Ã´i mÃ¬nh</h2>
      <p class="lead">VÃ i má»‘c nhá»â€¦ nhÆ°ng lÃ  cáº£ báº§u trá»i lá»›n cá»§a anh.</p>
      <div class="timeline">
        <div class="tl-item">
          <span class="tag">06/03/2025 - NgÃ y Ä‘áº§u gáº·p</span>
          <h3>Ãnh máº¯t hÃ´m áº¥y</h3>
          <p>QuÃ¡n Äƒn vá»‰a hÃ¨, hÃ ng gháº¿ cÃ´ng viÃªn, chiáº¿c Ã¡o tráº¯ng cá»§a Em vÃ  ná»¥ cÆ°á»i vÃ´ tÃ¬nh lÃ m láº¡c nhá»‹p tim anh.</p>
        </div>
        <div class="tl-item">
          <span class="tag">12/03/2025 - Buá»•i háº¹n hÃ² xem phim Ä‘áº§u tiÃªn</span>
          <h3>Trá»i Ä‘Ãªm thiá»‡t Ä‘áº¹p</h3>
          <p>KhoÃ¡c tay anh, Em nÃ³i em thÃ­ch xem phim <b>hÃ i</b>. Anh thÃ¬ thÃ­ch Em â€” tháº­t nhiá»u.</p>
        </div>
        <div class="tl-item">
          <span class="tag">03/08/2025 - Chuyáº¿n Ä‘i chÆ¡i xa Ä‘áº§u tiÃªn</span>
          <h3>Biá»ƒn xanh & Tiáº¿ng cÆ°á»i & NÃºi cao & Äá»“ Äƒn ngon</h3>
          <p>CÃ³ em phÃ­a sau xe, cÃ¹ng anh leo nÃºi, gáº·p <b>Xu</b>, vÃ  Äƒn ngon.</p>
        </div>
        <div class="tl-item">
          <span class="tag">HÃ´m nay</span>
          <h3>20/10 â€” Em xá»©ng Ä‘Ã¡ng</h3>
          <p>Má»—i ngÃ y anh Ä‘á»u muá»‘n Em vui váº» háº¡nh phÃºc, Ä‘Æ°á»£c yÃªu thÆ°Æ¡ng vÃ  luÃ´n tá»± tin vá» chÃ­nh mÃ¬nh. VÃ  Ä‘áº·c biá»‡t luÃ´n cÃ³ anh sÃ¡t cÃ¡nh cÃ¹ng em.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- LETTER -->
  <section>
    <div class="container">
      <h2 class="sec-title">ThÆ° gá»­i Em</h2>
      <div class="letter">
        <div id="typewriter" class="typewriter" aria-live="polite"></div>
        <div id="fullLetter" class="hidden mt-12">
          Ã yÃªu, <br>
          Cáº£m Æ¡n Em vÃ¬ Ä‘Ã£ kiÃªn nháº«n, dá»‹u dÃ ng vÃ  luÃ´n tin á»Ÿ anh. Anh há»©a sáº½ chÄƒm chá»‰ hÆ¡n, láº¯ng nghe nhiá»u hÆ¡n, vÃ  cÃ¹ng Em Ä‘i qua má»i bÃ¬nh minh láº«n giÃ´ng giÃ³, cÃ¹ng tráº£i qua ká»· niá»‡m thá»i sinh viÃªn vÃ  sau nÃ y. ChÃºc Em 20/10 ráº¡ng rá»¡ â€” nhÆ° chÃ­nh Em. <br>
          <strong>ThÆ°Æ¡ng Em nhiá»u - Ã yÃªu cá»§a anh! ğŸ’</strong>
        </div>
        <div class="actions">
          <button class="pill" id="btnReveal">Xem háº¿t</button>
          <button class="pill ghost" id="btnHearts">Báº¯n tim</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Carousel -->
  <section>
    <div class="container">
      <h2 class="sec-title">Ká»· niá»‡m trÃ´i Ãªm</h2>
      <p class="lead">áº¢nh sáº½ tá»± lÆ°á»›t nháº¹, nhÆ° nhá»¯ng ngÃ y bÃ¬nh yÃªn mÃ¬nh bÃªn nhau.</p>
      <div class="carousel" id="carousel">
        <div class="track" id="track">
          <img src="assets/anh1.jpg" alt="Ká»· niá»‡m 1" loading="lazy" decoding="async">
          <img src="assets/anh2.jpg" alt="Ká»· niá»‡m 2" loading="lazy" decoding="async">
          <img src="assets/anh3.jpg" alt="Ká»· niá»‡m 3" loading="lazy" decoding="async">
          <img src="assets/anh4.jpg" alt="Ká»· niá»‡m 4" loading="lazy" decoding="async">
          <img src="assets/anh5.jpg" alt="Ká»· niá»‡m 5" loading="lazy" decoding="async">
          <img src="assets/anh6.jpg" alt="Ká»· niá»‡m 6" loading="lazy" decoding="async">
          <img src="assets/anh7.jpg" alt="Ká»· niá»‡m 7" loading="lazy" decoding="async">
          <img src="assets/anh8.jpg" alt="Ká»· niá»‡m 8" loading="lazy" decoding="async">
          <img src="assets/anh9.jpg" alt="Ká»· niá»‡m 9" loading="lazy" decoding="async">
        </div>
        <div class="hint">Tá»± cháº¡y â€¢ cháº¡m Ä‘á»ƒ dá»«ng</div>
      </div>
    </div>
  </section>

  <!-- Mini-Quiz -->
  <section>
    <div class="container">
      <h2 class="sec-title">Mini-quiz â€œBáº¯t bÃ i Anh NÃ oâ€ ğŸ˜</h2>
      <p class="lead">Äiá»u gÃ¬ á»Ÿ em Ã mÃ  anh thÃ­ch nháº¥t?</p>
      <div class="quiz" id="quiz">
        <div class="opt">A. Ná»¥ cÆ°á»i</div>
        <div class="opt">B. Ãnh máº¯t</div>
        <div class="opt">C. TÃ­nh cÃ¡ch</div>
        <div class="opt">D. Táº¥t cáº£ nhá»¯ng Ä‘iá»u trÃªn</div>
        <div class="result mt-8" id="quizResult"></div>
      </div>
    </div>
  </section>

  <!-- Háº¹n hÃ² káº¿ tiáº¿p -->
  <section>
    <div class="container">
      <h2 class="sec-title">Háº¹n hÃ² káº¿ tiáº¿p ğŸŒ™</h2>
      <p class="lead">Em chá»n nhÃ©, anh sáº½ lÃªn lá»‹ch dáº«n cá»¥c dÃ ng Ä‘i:</p>
      <div class="chips" id="chips">
        <span class="chip">â¤ï¸ Phim + Jollibee (nhÆ° ngÃ y Ä‘áº§u ğŸ¤­)</span>
        <span class="chip">ğŸœ Dokki</span>
        <span class="chip">ğŸŒ³ Tháº£o Cáº§m ViÃªn</span>
        <span class="chip">ğŸ“· Äi chá»¥p áº£nh</span>
        <span class="chip">â˜• CÃ  phÃª chill</span>
        <span class="chip">ğŸµ Vá» nhÃ  cÃ¹ng anh thÆ° giÃ£n</span>
      </div>
    </div>
  </section>

  <!-- GALLERY -->
  <section>
    <div class="container">
      <h2 class="sec-title">Album nhá» cá»§a chÃºng mÃ¬nh</h2>
      <div class="gallery" aria-label="Bá»™ sÆ°u táº­p áº£nh">
        <img src="assets/anh2.jpg" alt="Ká»· niá»‡m 1" loading="lazy" decoding="async">
        <img src="assets/anh3.jpg" alt="Ká»· niá»‡m 2" loading="lazy" decoding="async">
        <img src="assets/anh9.jpg" alt="Ká»· niá»‡m 3" loading="lazy" decoding="async">
        <img src="assets/anh4.jpg" alt="Ká»· niá»‡m 4" loading="lazy" decoding="async">
        <img src="assets/anh6.jpg" alt="Ká»· niá»‡m 5" loading="lazy" decoding="async">
        <img src="assets/anh7.jpg" alt="Ká»· niá»‡m 6" loading="lazy" decoding="async">
      </div>
    </div>
  </section>

  <!-- GIFT -->
  <section class="center">
    <div class="container">
      <h2 class="sec-title">Má»™t mÃ³n quÃ  nhá» cho Em</h2>
      <p class="lead">KhÃ´ng pháº£i Ä‘áº¯t tiá»n xa xá»‰, chá»‰ lÃ  táº¥t cáº£ yÃªu thÆ°Æ¡ng anh cÃ³.</p>
      <button class="pill" id="btnGift">ğŸ Má»Ÿ quÃ </button>
      <div class="mt-12">
        <button class="pill ghost" id="btnSecret" title="Nháº¥n & giá»¯ 2 giÃ¢y" style="margin-top: 20px;">ğŸ”’ Nháº¥n & giá»¯ Ä‘á»ƒ má»Ÿ bÃ­ máº­t</button>
      </div>
    </div>
  </section>
</main>

<!-- MODAL -->
<div id="backdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="giftTitle" aria-describedby="giftDesc" style="display:none">
  <div class="modal">
    <h3 id="giftTitle">Voucher Ã´m + hÃ´n + trÃ  sá»¯a</h3>
    <p id="giftDesc">QuÃ©t QR Ä‘á»ƒ nháº­n quyá»n lá»£i: 999 ná»¥ hÃ´n, 1 ly trÃ  sá»¯a & 1 pháº§n quÃ  báº¥t ká»³ ğŸ¥¤ğŸ’‹</p>
    <div class="qr" style="padding:0; border:none">
      <img src="assets/qr.png" alt="Choa anh iu  ná»£ nhÃ¡ mai lÃ m bÃ¹ hehe" style="width:220px;height:220px;border-radius:12px;display:block;">
    </div>
    <div class="row">
      <button class="pill" id="btnConfetti">Báº¯n phÃ¡o tim</button>
      <button class="pill ghost" id="btnClose">ÄÃ³ng</button>
    </div>
  </div>
</div>

<footer>
  <div class="container">
    <p>Trang nÃ y Ä‘Æ°á»£c lÃ m riÃªng cho <span class="sign" style="color:#ff7aa2;font-weight:800">Em</span>. Cáº£m Æ¡n vÃ¬ Ä‘Ã£ Ä‘áº¿n bÃªn anh. ğŸŒ™</p>
    <p class="mt-8">P/S: Nháº¥n Ä‘Ã´i vÃ o ná»n Ä‘á»ƒ tim bay nhiá»u hÆ¡n nha ğŸ’˜</p>
  </div>
</footer>

<!-- Audio -->
<audio id="bgm" preload="auto" loop>
  <source src="assets/music.mp3" type="audio/mpeg">
</audio>

<div class="toast" id="toast">ÄÃ£ lÆ°u lá»‹ch háº¹n ğŸ’Œ</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
/* ===== Helpers & DPR ===== */
const $ = (sel, scope=document) => scope.querySelector(sel);
const isiOS = /iPad|iPhone|iPod/.test(navigator.userAgent) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
const DPR = isiOS ? 1.5 : Math.min(window.devicePixelRatio || 1, 2);

/* ===== INTRO: Night sky + beating star heart ===== */
(() => {
  const cvs = $("#introCanvas");
  const ctx = cvs.getContext("2d");
  let W=0, H=0, stars=[];
  function resize(){
    W = cvs.width = Math.floor(innerWidth * DPR);
    H = cvs.height = Math.floor(innerHeight * DPR);
  }
  addEventListener("resize", resize, {passive:true}); resize();
  const STAR_N = (innerWidth <= 430) ? 160 : 240;
  function initStars(){
    stars = Array.from({length:STAR_N}, () => ({
      x: Math.random()*W, y: Math.random()*H,
      r: (Math.random()*2.0 + 0.8)*DPR,
      a0: Math.random()*0.35 + 0.55,
      t: Math.random()*Math.PI*2,
      tw: 0.012 + Math.random()*0.02
    }));
  }
  initStars();
  function drawStarfield(){
    ctx.save(); ctx.globalCompositeOperation = "lighter";
    for(const s of stars){
      s.t += s.tw;
      const a = Math.min(1, s.a0 + Math.sin(s.t)*0.25);
      const grd = ctx.createRadialGradient(s.x, s.y, 0, s.x, s.y, s.r*2.2);
      grd.addColorStop(0, `rgba(255,255,255,${a})`);
      grd.addColorStop(1, `rgba(210,170,255,${a*0.25})`);
      ctx.fillStyle = grd;
      ctx.beginPath(); ctx.arc(s.x, s.y, s.r*2.2, 0, Math.PI*2); ctx.fill();
      s.x += 0.02*DPR; s.y += 0.01*DPR;
      if (s.x>W+12) s.x=-12; if (s.y>H+12) s.y=-12;
    }
    ctx.restore();
  }
  function heartPoint(t){
    const x = 16*Math.pow(Math.sin(t),3);
    const y = 13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t);
    return {x, y};
  }
  let beatT = 0, last=performance.now();
  function drawHeart(){
    beatT += 0.06;
    const beat = 1 + Math.sin(beatT)*0.06;
    const scale = Math.min(W,H)*0.038*beat;
    const cx = W/2, cy = H/2 - 10*DPR;
    const dots = 420;
    for (let i=0;i<dots;i++){
      const t = (i/dots) * Math.PI*2;
      const p = heartPoint(t);
      const x = cx + p.x*scale;
      const y = cy - p.y*scale;
      const hue = (i%5===0)? 50 : 335;
      const alpha = 0.65 + 0.35*Math.sin(beatT + i*0.12);
      ctx.fillStyle = `hsla(${hue} 85% 75% / ${Math.max(0,Math.min(1,alpha))})`;
      ctx.fillRect(x, y, 1.2*DPR, 1.2*DPR);
    }
    const rad = ctx.createRadialGradient(cx, cy, scale*0.9, cx, cy, scale*3.8);
    rad.addColorStop(0, "rgba(255,200,220,0.45)");
    rad.addColorStop(1, "rgba(10,10,19,0)");
    ctx.fillStyle = rad; ctx.beginPath(); ctx.arc(cx, cy, scale*3.8, 0, Math.PI*2); ctx.fill();
  }
  function loop(now=performance.now()){
    if (now - last < 22) { requestAnimationFrame(loop); return; } // ~45fps iOS
    last = now;
    const g = ctx.createLinearGradient(0,0,0,H);
    g.addColorStop(0, "#0d0b18"); g.addColorStop(1, "#141326");
    ctx.fillStyle = g; ctx.fillRect(0,0,W,H);
    drawStarfield(); drawHeart();
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
})();

/* ===== Danh sÃ¡ch video ná»n (Ä‘áº·t file mp4 vÃ o assets/) ===== */
const videoFiles = [
  "assets/video1.mp4",
  "assets/video2.mp4",
  "assets/video3.mp4",
  "assets/video4.mp4",
  "assets/video5.mp4",
  "assets/video6.mp4"   // thÃªm video6 Ä‘á»ƒ Ä‘á»§ 6 Ã´
];

/* ===== Build video background AFTER Start (robust cho iOS) ===== */
function safePlay(video, tries=3){
  const attempt = () => video.play().catch(err=>{
    if (tries>0) setTimeout(()=>attempt(--tries), 150);
  });
  attempt();
}
function buildVideoWall(){
  const wrap = $("#videoBG");
  wrap.innerHTML = "";
  const areas = ["a","b","c","d","e","f"];
  const files = videoFiles.length >= 6 ? videoFiles.slice(0,6) : [...videoFiles, ...videoFiles].slice(0,6);

  areas.forEach((area, i) => {
    const cell = document.createElement("div");
    cell.className = `vcell ${area}`;
    cell.dataset.area = area;

    const v = document.createElement("video");
    v.setAttribute("playsinline","");
    v.setAttribute("webkit-playsinline","");
    v.setAttribute("muted","");            // attr + prop Ä‘á»ƒ iOS cháº¯c cháº¯n mute
    v.muted = true;
    v.loop = true;
    v.autoplay = true;
    v.preload = "metadata";
    v.disableRemotePlayback = true;

    // Stagger attach src & animation Ä‘á»ƒ giáº£m táº£i giáº£i mÃ£ Ä‘á»“ng thá»i
    v.style.animationDelay = `${0.08 * i}s, 0s`;
    const src = files[i % files.length];

    const onMeta = ()=>{
      try{
        const dur = Math.max(0, (v.duration || 12) - 1);
        v.currentTime = Math.random() * dur;
      }catch{}
      safePlay(v, 4);
    };
    const onError = ()=>{
      // fallback: gÃ¡n láº¡i src hoáº·c dÃ¹ng 1 video khÃ¡c Ä‘á»ƒ trÃ¡nh 1 Ã´ cháº¿t
      v.removeAttribute('src');
      v.load();
      v.src = files[(i+1) % files.length];
      v.addEventListener('loadedmetadata', onMeta, {once:true});
      v.addEventListener('error', ()=>safePlay(v,2), {once:true});
      v.load();
    };

    // TrÃ¬ hoÃ£n 2 Ã´ cuá»‘i Ä‘á»ƒ trÃ¡nh burst
    const delayAttach = i >= 4 ? 300 : 0;
    setTimeout(()=>{
      v.src = src;
      v.addEventListener('loadedmetadata', onMeta, {once:true});
      v.addEventListener('error', onError, {once:true});
      // Má»™t sá»‘ iOS cáº§n cháº¡m ngÆ°á»i dÃ¹ng rá»“i má»›i play â€” Ä‘Ã£ cÃ³ nÃºt Start
      v.load();
    }, delayAttach);

    cell.appendChild(v);
    wrap.appendChild(cell);
  });

  wrap.style.opacity = "1";
}

/* ===== Countdown (IDs á»Ÿ intro) ===== */
(function setupCountdown(){
  const dd = $("#dd"), hh = $("#hh"), mm = $("#mm"), ss = $("#ss");
  function next2010(now = new Date()){
    const y = now.getFullYear();
    const targetThisYear = new Date(y, 9, 20, 0, 0, 0);
    return (now <= targetThisYear) ? targetThisYear : new Date(y+1, 9, 20, 0, 0, 0);
  }
  function tick(){
    const now = new Date(); const tgt = next2010(now); const diff = tgt - now;
    if (diff <= 0){
      const el = document.querySelector(".intro-countdown");
      if (el) el.innerHTML = `<div class="icell"><div class="num">ğŸ‰</div><div class="lbl">ChÃºc má»«ng</div></div>`;
      return;
    }
    const s = Math.floor(diff/1000);
    const days = Math.floor(s/86400);
    const hrs = Math.floor((s%86400)/3600);
    const mins = Math.floor((s%3600)/60);
    const secs = s%60;
    dd.textContent = days; hh.textContent = String(hrs).padStart(2,"0");
    mm.textContent = String(mins).padStart(2,"0"); ss.textContent = String(secs).padStart(2,"0");
    requestAnimationFrame(()=>setTimeout(tick, 1000 - (Date.now()%1000)));
  }
  tick();
})();

/* ===== Typewriter ===== */
const lines = [
  "Em lÃ  Ä‘iá»u dá»‹u Ãªm giá»¯a cuá»™c sá»‘ng vá»™i vÃ ng,",
  "lÃ  bÃ¬nh yÃªn anh muá»‘n quay vá» sau má»—i ngÃ y dÃ i,",
  "lÃ  nguá»“n cáº£m há»©ng Ä‘á»™ng lá»±c Ä‘á»ƒ anh tá»‘t hÆ¡n tá»«ng chÃºt má»™t.",
  "ChÃºc Em 20/10 rá»±c rá»¡ â€” anh luÃ´n á»Ÿ Ä‘Ã¢y vá»›i Em."
];
(function typewriter(){
  const box = $("#typewriter");
  let i=0, j=0, pause=900, speed=28;
  function write(){
    if (i >= lines.length) return;
    const line = lines[i];
    box.innerHTML = lines.slice(0,i).map(l=>`${l}<br>`).join("") + line.slice(0, j) + "<span style='opacity:.6'>|</span>";
    j++;
    if (j <= line.length) setTimeout(write, speed);
    else { i++; j=0; setTimeout(write, pause); }
  }
  write();
})();
$("#btnReveal")?.addEventListener("click", ()=> $("#fullLetter").classList.remove("hidden"));

/* ===== Audio + Start ===== */
const audio = $("#bgm");
$("#btnEnter").addEventListener("click", async ()=>{
  const intro = $("#intro");
  intro.style.transition = "opacity .8s ease";
  intro.style.opacity = "0";
  setTimeout(()=>{ intro.style.display = "none"; }, 820);

  buildVideoWall();

  try{ await audio.play(); }catch(e){}
  pulseHearts(18);
});
$("#btnMuteHint").addEventListener("click", ()=> alert("Náº¿u khÃ´ng nghe tháº¥y, hÃ£y báº­t volume thiáº¿t bá»‹ vÃ  bá» cháº¿ Ä‘á»™ im láº·ng (iOS)."));

/* ===== Modal ===== */
const backdrop = $("#backdrop");
$("#btnGift")?.addEventListener("click", ()=> backdrop.style.display="flex");
$("#btnClose")?.addEventListener("click", ()=> backdrop.style.display="none");
backdrop?.addEventListener("click", (e)=>{ if(e.target===backdrop) backdrop.style.display="none"; });

/* ===== Confetti ===== */
$("#btnConfetti")?.addEventListener("click", ()=>{
  confetti({
    particleCount: 100,
    spread: 70,
    origin: { y: 0.6 }
  });
});

/* ===== Hearts Particles ===== */
const cvsHearts = $("#hearts");
const ctxHearts = cvsHearts.getContext("2d");
let HW=0, HH=0, heartParticles=[];
let heartsRunning = true;
function resizeHearts(){ HW = cvsHearts.width = Math.floor(innerWidth * DPR); HH = cvsHearts.height = Math.floor(innerHeight * DPR); }
addEventListener("resize", resizeHearts, {passive:true}); resizeHearts();

function heartPath(ctx, x,y, s, rot=0){
  ctx.save(); ctx.translate(x,y); ctx.rotate(rot); ctx.scale(s,s);
  ctx.beginPath(); ctx.moveTo(0, -10);
  ctx.bezierCurveTo(12, -24, 32, -10, 0, 18);
  ctx.bezierCurveTo(-32, -10, -12, -24, 0, -10);
  ctx.closePath(); ctx.restore();
}
function spawnHearts(n=12, x=HW/2, y=HH/2){
  for (let i=0;i<n;i++){
    const ang = Math.random()*Math.PI*2;
    const spd = 1 + Math.random()*2.2;
    heartParticles.push({
      x, y,
      vx: Math.cos(ang)*spd*DPR,
      vy: (Math.sin(ang)*spd - 1.1)*DPR,
      g: (0.018 + Math.random()*0.02)*DPR,
      a: 1,
      s: 0.8*DPR + Math.random()*1.4*DPR,
      r: Math.random()*Math.PI,
      vr: (Math.random()-.5)*0.055,
      color: ["#ff7aa2","#ff9fbe","#ffd1e1","#ffd96a"][Math.floor(Math.random()*4)]
    });
  }
}
function pulseHearts(n=14){
  const x = (Math.random()*HW*0.6)+HW*0.2;
  const y = (Math.random()*HH*0.4)+HH*0.2;
  spawnHearts(n, x, y);
}
let lastHearts = performance.now();
function loopHearts(now = performance.now()){
  if (!heartsRunning) return;
  if (now - lastHearts < 22) { requestAnimationFrame(loopHearts); return; } // ~45fps
  lastHearts = now;
  ctxHearts.clearRect(0,0,HW,HH);
  for (let p of heartParticles){
    p.vy += p.g; p.x += p.vx; p.y += p.vy; p.r += p.vr; p.a *= 0.986;
  }
  heartParticles = heartParticles.filter(p => p.a>0.03 && p.y < HH+60*DPR);
  for (let p of heartParticles){
    ctxHearts.save(); ctxHearts.globalAlpha = p.a; ctxHearts.fillStyle = p.color;
    heartPath(ctxHearts, p.x, p.y, p.s, p.r); ctxHearts.fill(); ctxHearts.restore();
  }
  requestAnimationFrame(loopHearts);
}
requestAnimationFrame(loopHearts);
document.addEventListener("dblclick", ()=>pulseHearts(28));
$("#btnHearts")?.addEventListener("click", ()=>pulseHearts(24));

/* ===== Carousel pause on pointer ===== */
const track = $("#track");
let paused = false;
$("#carousel")?.addEventListener('pointerdown', ()=>{ track.style.animationPlayState='paused'; paused=true; });
addEventListener('pointerup', ()=>{ if(paused){ track.style.animationPlayState='running'; paused=false; } });

/* ===== Mini-quiz ===== */
const quiz = $("#quiz");
const quizResult = $("#quizResult");
if (quiz){
  const opts = [...quiz.querySelectorAll('.opt')];
  opts.forEach((el, idx)=>{
    el.addEventListener('click', ()=>{
      opts.forEach(o=>o.classList.remove('correct','wrong'));
      if (idx === 3){ el.classList.add('correct'); quizResult.textContent = "Chuáº©n! Thá»±c ra anh thÃ­ch táº¥t táº§n táº­t vá» Em. ğŸ¥°"; pulseHearts(18); }
      else { el.classList.add('wrong'); quizResult.textContent = "CÅ©ng Ä‘Ãºngâ€¦ nhÆ°ng Ä‘Ã¡p Ã¡n chÃ­nh xÃ¡c nháº¥t lÃ : Táº¤T Cáº¢! ğŸ’–"; }
    });
  });
}

/* ===== Chips -> toast ===== */
const toast = $("#toast");
$("#chips")?.addEventListener('click', (e)=>{
  const chip = e.target.closest('.chip'); if (!chip) return;
  toast.textContent = `Okay! ${chip.textContent} â€” ghi sá»• háº¹n hÃ² ğŸ’Œ`;
  toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'), 1600);
  pulseHearts(12);
});

/* ===== Secret press & hold ===== */
(function holdToReveal(){
  const btn = $("#btnSecret");
  if (!btn) return;
  let timer; let down=false;
  const secret = "BÃ­ máº­t: Em chÃ­nh lÃ  Ä‘iá»u tuyá»‡t vá»i nháº¥t tá»«ng xáº£y ra vá»›i anh. â€” YÃªu Em! ğŸ’—";
  const downHandler = ()=>{ if (down) return; down=true; timer = setTimeout(()=>{ alert(secret); pulseHearts(22); down=false; }, 1800); };
  const upHandler = ()=>{ clearTimeout(timer); down=false; };
  ['mousedown','touchstart'].forEach(ev=>btn.addEventListener(ev, downHandler));
  ['mouseup','mouseleave','touchend','touchcancel'].forEach(ev=>btn.addEventListener(ev, upHandler));
})();

/* ===== Tab visibility: tiáº¿t kiá»‡m pin & trÃ¡nh video pause báº¥t ngá» ===== */
document.addEventListener("visibilitychange", ()=>{
  const vids = document.querySelectorAll("#videoBG video");
  if (document.hidden){ vids.forEach(v=>v.pause()); }
  else { vids.forEach(v=> v.play().catch(()=>{})); }
  heartsRunning = !document.hidden;
  if (!document.hidden) requestAnimationFrame(loopHearts);
});

/* ===== Tilt cards ===== */
(() => {
  const TILT_X = 6, TILT_Y = 8;
  const cards = document.querySelectorAll('.trait');
  if (!cards.length) return;
  cards.forEach(card => {
    let raf = 0;
    function setTilt(e, isTouch=false){
      const r = card.getBoundingClientRect();
      const cx = isTouch ? (e.touches?.[0].clientX ?? e.clientX) : e.clientX;
      const cy = isTouch ? (e.touches?.[0].clientY ?? e.clientY) : e.clientY;
      const x = (cx - r.left) / r.width, y = (cy - r.top)  / r.height;
      const rx = (y - 0.5) * -TILT_X, ry = (x - 0.5) *  TILT_Y;
      cancelAnimationFrame(raf);
      raf = requestAnimationFrame(() => {
        card.style.transform = `perspective(700px) rotateX(${rx}deg) rotateY(${ry}deg)`;
        card.style.setProperty('--lx', `${x*100}%`);
        card.style.setProperty('--ly', `${y*100}%`);
      });
    }
    function resetTilt(){
      cancelAnimationFrame(raf);
      card.style.transform = 'perspective(700px) rotateX(0) rotateY(0)';
      card.style.removeProperty('--lx'); card.style.removeProperty('--ly');
    }
    card.addEventListener('mousemove', setTilt);
    card.addEventListener('mouseleave', resetTilt);
    card.addEventListener('touchstart', e => setTilt(e, true), {passive:true});
    card.addEventListener('touchmove',  e => setTilt(e, true), {passive:true});
    card.addEventListener('touchend',   resetTilt, {passive:true});
    card.addEventListener('touchcancel',resetTilt, {passive:true});
  });
})();
</script>
</body>
</html>
